!function($){"use strict";function updateQuery(){var filters=getFiltersFromSearchForm(),filterString="&";for(var key in filters){filterString+=key+"="+filters[key]+"&"}var oldUrl=window.location.pathname+window.location.search,newUrl="/search/?query="+getQueryFromSearchForm()+filterString;newUrl!=oldUrl&&(clearSearchResults(),window.history.pushState({},"",newUrl),getSearchResults(urlParams),console.log("Query updated!"))}function resetSearch(){$inputField.val(""),$(".search__container > select").val("")}function clearSearchResults(){console.log("Clearing search results."),$(".search__result").remove(),$(".search__results-count").remove()}function getQueryFromUrl(urlParams){return urlParams.get("query")}function getQueryFromSearchForm(){return $inputField.val()}function getFiltersFromUrl(urlParams){var params=urlParams.entries(),nextParam=params.next().value,filters={};do{"query"!=nextParam[0]&&(filters[nextParam[0]]=nextParam[1]),nextParam=params.next().value}while(void 0!=nextParam);return filters}function getFiltersFromSearchForm(){var filters=$(".search__filter"),filtersObj={};return filters.each(function(e){var $categoryId=jQuery("select",this).attr("id"),$filterVal=jQuery(".chosen-container > a:not(.chosen-default) > span",this).text();filtersObj[$categoryId]=$filterVal}),filtersObj}function filtersToArray(filters){var filterArray=[];for(var key in filters){var value=filters[key];filterArray.push(key+":"+value)}return filterArray}function getSearchResults(urlParams){console.log("Search initiated!");var query=getQueryFromUrl(urlParams),filters=filtersToArray(getFiltersFromUrl(urlParams)),searchObj={query:query,facetFilters:filters};index.search(searchObj,function(err,content){if(err)return void console.error(err);var resultsLabel=1==content.hits.length?" result":" results",resultsMessage="Showing "+content.hits.length+resultsLabel+' for "'+query+'"';$(".page-title").replaceWith('<h1 class="page-title">'+resultsMessage+"</h1>");var results=[];for(var h in content.hits){var hit=content.hits[h],searchResult='<div class="search__result"><h2 class="h3 search__result-title"><a href="'+hit.url+'">'+hit.title+'</a></h2><div class="search__result-link">'+document.location.origin+hit.url+'</div><div class="search__result-text">'+hit.text+"</div></div>";results.push(searchResult)}$resultsArea.append(results.join(""))})}var client=algoliasearch("SVDV4TVTRX","9dff47d4e1874ea1dd1bbb323220ec88"),index=client.initIndex("probo-docs"),$inputField=$(".search__input"),$submitButton=$(".search__submit"),$resetButton=$(".search__reset"),$resultsArea=$(".search__results"),urlParams=new URLSearchParams(window.location.search);$(".search__select").chosen({allow_single_deselect:!0,disable_search_threshold:10,width:"100%"}),$(".accordion-nav__item.search").remove(),0!=getQueryFromUrl(urlParams)?(!function(urlParams){$inputField.val(getQueryFromUrl(urlParams));var formFilters=getFiltersFromSearchForm(),urlFilters=getFiltersFromUrl(urlParams);for(var formFilter in formFilters){var formFilterVal=formFilters[formFilter];for(var urlFilter in urlFilters)if(urlFilter==formFilter){var urlFilterVal=urlFilters[urlFilter];formFilterVal!=urlFilterVal&&$("select[name="+formFilter+"] ~ .chosen-container > a > span").text(urlFilterVal)}}}(urlParams),getSearchResults(urlParams)):function(message){$resultsArea.append('<p class="search__results-count">'+message+"</p>")}("You haven't searched for anything yet."),$submitButton.on("click",function(e){e.preventDefault(),updateQuery()}),$inputField.on("blur",function(e){updateQuery()}),$(".chosen-results > li").on("click",function(e){updateQuery()}),$resetButton.on("click",resetSearch)}(jQuery);